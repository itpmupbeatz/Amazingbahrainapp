<form id="registrationForm">
  <input type="text" name="name" placeholder="Name" required />
  <input type="text" name="phone" placeholder="Phone" required />
  <input type="email" name="email" placeholder="Email ID (optional)" />
  <button type="submit">Submit</button>
</form>

<script>
  document.getElementById("registrationForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    const formData = new FormData(this);
    const data = {
      name: formData.get("name"),
      phone: formData.get("phone"),
      email: formData.get("email") || null
    };

    try {
      const res = await fetch("/register", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const result = await res.json();

      if (result.success) {
        alert("Form submitted successfully!");
        this.reset();
      } else {
        alert("Error: " + result.message);
      }
    } catch (error) {
      alert("Failed to submit form.");
      console.error(error);
    }
  });
</script>
